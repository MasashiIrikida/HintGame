# 🗺️ HintGame（宝探しゲーム）


## ✨ はじめに


- このゲームはデイトラJavaコースの課題制作です

- ご利用時のトラブル等につきましては、一切の責任を負いかねます事をご了承ください

---


## 🎬 デモ動画

![Demo Video](demo_video.gif)

---

## 🎯 コンセプト


- 「宝探し × 対話」をテーマにしたMinecraft内で遊べるミニゲームです

- RPGのように、村人との対話から情報を集め、ゲームをクリアするのに必要なアイテムを手に入れながら、
  プレイヤーがゲームと一緒に成長して行く感覚を得られるようにと願って作成しました

---

## 📘 概要


- 村人キャラクター（考えるナビゲーター）を右クリックすると、宝物に関するヒントが得られます  
- 制限時間：130秒  
- 難易度：easy / normal / hard  
- スコア：宝物を手に入れるまでの時間で決定  
- 特典：hardクリアで「ダイバーヘルメット」入手（暗視＋スピードアップ＋水中呼吸）

---

## 💡 工夫した点


- **ダイバーヘルメットの効果**  
  - 暗視効果  
  - スピードアップ効果  
  - 水中呼吸不要  
  - 水中探索が快適に！

---

## 🧩 難しかった点


- 村人を右クリックした際に、村人に職業が設定されていると強制的に取引インベントリが開かれてしまい、
  ymlファイルに記載したヒント集を返せなくなる状況が発生した事

- 対策として、村人のデフォルトAI機能を停止させたところ、取引インベントリは開かないようにはなったが、 
  村人の動きまで止まってしまい、まるでロダンの考える人のようになってしまった

- 解決策としては、村人の職業をニートにして、あらかじめ職業に就かせなくする事で、職業インベントリも
  開けないようにする事ができるが、味を出すために考える人風の村人を登場させるようにした

---

## 🧵 コマンド一覧


| コマンド | 説明 |
|---------|------|
| `/gamestart [easy, normal, hard]` | 難易度を指定してゲーム開始 |
| `/scorelist` | 直近20件のスコア表示 |
| `/scoreranking` | 上位5件＋直近スコア表示 |

---

## 👨‍👩‍👧‍👦 想定ユーザー


- Minecraft(Java版）でプラグイン開発(Spigot)を行っているユーザー  
- Minecraftのアイテムに興味があるユーザー
- 対話型・探索型のゲーム体験に関心があるユーザー

---

## ⚠️ 留意事項

- マルチプレイ未対応  
- MySQLデータベースが必要  
  - テーブル作成  
  - 設定ファイルに password を記載  
- コマンド実行前に「半径30ブロック以内が陸地」であることを確認  
- ビルド方法： gradle shadowJar → build/libs/ に fat Jar が生成

---

## 🧪 開発環境

| 項目         | バージョン              |
|--------------|--------------------------|
| 開発言語     | jdk-21 (Oracle)          |
| SDK          | ms-17.0.15 (Microsoft)   |
| アプリ       | Minecraft 1.21.4         |
| サーバー     | Spigot 1.21.4            |
| プラグイン　　| ShadowJar 8.3.8         |
| データベース | MySQL 8.0.43             |
| ORM          | MyBatis 3.5.19           |
| OS           | Windows 11               |

---

## 🖥️ 導入方法（Windows向けの解説）

<br>

### 🎮 1.Minecraftの購入

  - Minecraft; Java&Bedrock Edition for PCを購入して、インストールしてください

  - その際、Microsoftアカウントの作成が必要です

  - その後、Launcherを開き、バージョン1.21.4を指定した上で、プレイボタンを押すと、
    しばらくしてプレイ画面に移動します

<br>
    
---

<br>

### 🐬 2.MySQLのダウンロード

  - MySQL Installer 8.0.43をダウンロードします。アカウントは作成しなくていいです

  - Installerを起動して、複数の中からMySQL Serverをダウンロードしてください

<br>

---

<br>

### ⚙️ 3.環境変数の設定

  - タスクバーの検索バーに「環境変数」と入力して、移動してください
    
  - ユーザー環境変数の「新規」を選び、「変数名」を `Path` 、「変数値」を
    `C:\Program Files\MySQL\MySQL Server 8.0\bin` に指定してください
    
<br>

---

<br>

### 🔐 4.MySQLにログイン

　- ターミナルアプリを開き、 `mysql -u root -p` と入力して、パスワードを設定した<br>
&emsp;&emsp;後、ログインします

<br>

---

<br>

### 🗃️ 5.データベースの作成

　- MySQLにログインした状態で、テーブルを作成します

  ```
  CREATE DATABASE spigot_server;

  USE spigot_server;

  CREATE TABLE player_score(id int auto_increment, player_name varchar(100), 
  score int, difficulty varchar(30), registered_at datetime, primary key(id)) 
  DEFAULT CHARSET=utf8;
  ```
<br>

---

<br>

### 📝 6.設定ファイルの作成

　- `resouces` ファイルの `mybatis-config.xml` の `username`と`password` をご自身が設定したものに
 
<br>

---

<br>

### 🚀 7.サーバーの起動

　- pluginsフォルダに`HintGame-1.0-SNAPSHOT-all.jar`を配置します

  - `server_start.bat`をダブルクリックすると、サーバーが起動します
    
  - Minecraftのプレイ画面が開いている事を確認します

  - マルチプレイを選択して、サーバーが利用可能か確認してログインしてください

  - サーバーを停止する時は、`server_start.bat`を通常通り閉じてください
    
<br>

---

## 🙏 おわりに

最後までお読みいただき、ありがとうございました！  
よければ水中探索やスコア向上なども、楽しんでください！
